<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 Tipova캜ka 2025</title>
    <style>
        /* 맚칳ly pre t칤my - aktualizovan칠 farby pod쬬 F1 2024 */
        .team-mclaren { background-color: #FF8000; color: white; } /* McLaren - oran쬺v치 */
        .team-ferrari { background-color: #DC0000; color: white; } /* Ferrari - 캜erven치 */
        .team-redbull { background-color: #0600EF; color: white; } /* Red Bull - tmavomodr치 */
        .team-mercedes { background-color: #00D2BE; color: black; } /* Mercedes - tyrkysov치 */
        .team-astonmartin { background-color: #006F62; color: white; } /* Aston Martin - zelen치 */
        .team-alpine { background-color: #0090FF; color: white; } /* Alpine - modr치 */
        .team-haas { background-color: #FFFFFF; color: black; border: 1px solid #000; } /* Haas - biela */
        .team-racingbulls { background-color: #2B4562; color: white; } /* Racing Bulls - tmavomodr치 */
        .team-williams { background-color: #005AFF; color: white; } /* Williams - modr치 */
        .team-sauber { background-color: #9B0000; color: white; } /* Sauber - 캜erven치 */

        /* Hlavn칠 코t칳ly */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            background-color: #e10600;
            color: white;
            padding: 15px;
            text-align: center;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px;
        }

        .login-section {
            flex: 1 1 100%;
            max-width: 300px;
            padding: 20px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            margin: 20px auto;
        }

        .left-panel, .right-panel {
            flex: 1;
            min-width: 300px;
            padding: 20px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .center-panel {
            flex: 2;
            min-width: 400px;
            padding: 20px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }

        .first-place {
            background-color: gold;
            font-weight: bold;
        }

        button {
            padding: 8px 16px;
            margin: 5px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
            background-color: #e10600;
            color: white;
        }

        button:hover {
            background-color: #c10500;
        }

        .hidden {
            display: none;
        }

        .admin-section {
            background-color: #ffebee;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .participant-link {
            color: #e10600;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }

        .participant-link:hover {
            text-decoration: underline;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 800px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

<header>
    <h1>F1 Tipova캜ka 2025</h1>
</header>

<div class="login-section">
    <h3>Prihl치senie</h3>
    <input type="text" id="username" placeholder="Meno" required>
    <input type="password" id="password" placeholder="Heslo" required>
    <button onclick="login()">Prihl치si콘</button>
    <div id="admin-controls" class="admin-section hidden">
        <h3>Admin ovl치danie</h3>
        <button onclick="showEditStandings()">Upravi콘 poradie</button>
        <button onclick="showEditConstructors()">Upravi콘 kon코trukt칠rov</button>
        <button onclick="addNewParticipant()">Prida콘 칰캜astn칤ka</button>
    </div>
</div>

<div class="main-content">
    <div class="left-panel">
        <h2>Mo쬹osti</h2>
        <button onclick="toggleSection('drivers-list')">Zoznam Jazdcov</button>
        <button onclick="toggleSection('calendar-section')">Program VC 2025</button>
        <button onclick="toggleSection('standings-section')">Aktu치lne poradie</button>
        
        <!-- Kompletn칳 zoznam jazdcov pod쬬 t칤mov -->
        <div id="drivers-list" class="hidden">
            <h3>Jazdci 2025 pod쬬 t칤mov</h3>
            <div class="team-mclaren" style="padding: 10px; margin-bottom: 10px;">
                <h4>McLaren</h4>
                <p>1. Lando Norris</p>
                <p>2. Oscar Piastri</p>
            </div>
            <div class="team-ferrari" style="padding: 10px; margin-bottom: 10px;">
                <h4>Ferrari</h4>
                <p>1. Charles Leclerc</p>
                <p>2. Lewis Hamilton</p>
            </div>
            <div class="team-redbull" style="padding: 10px; margin-bottom: 10px;">
                <h4>Red Bull Racing</h4>
                <p>1. Max Verstappen</p>
                <p>2. Liam Lawson</p>
            </div>
            <div class="team-mercedes" style="padding: 10px; margin-bottom: 10px;">
                <h4>Mercedes</h4>
                <p>1. George Russell</p>
                <p>2. Kimi Antonelli</p>
            </div>
            <div class="team-astonmartin" style="padding: 10px; margin-bottom: 10px;">
                <h4>Aston Martin</h4>
                <p>1. Fernando Alonso</p>
                <p>2. Lance Stroll</p>
            </div>
            <div class="team-alpine" style="padding: 10px; margin-bottom: 10px;">
                <h4>Alpine</h4>
                <p>1. Pierre Gasly</p>
                <p>2. Jack Doohan</p>
            </div>
            <div class="team-haas" style="padding: 10px; margin-bottom: 10px;">
                <h4>Haas</h4>
                <p>1. Esteban Ocon</p>
                <p>2. Oliver Bearman</p>
            </div>
            <div class="team-racingbulls" style="padding: 10px; margin-bottom: 10px;">
                <h4>Racing Bulls</h4>
                <p>1. J칰ki Cunoda</p>
                <p>2. Isack Hadjar</p>
            </div>
            <div class="team-williams" style="padding: 10px; margin-bottom: 10px;">
                <h4>Williams</h4>
                <p>1. Alex Albon</p>
                <p>2. Carlos Sainz</p>
            </div>
            <div class="team-sauber" style="padding: 10px; margin-bottom: 10px;">
                <h4>Kick Sauber</h4>
                <p>1. Nico H칲lkenberg</p>
                <p>2. Gabriel Bortoleto</p>
            </div>
        </div>

        <!-- Kompletn칳 kalend치r VC -->
        <div id="calendar-section" class="hidden">
            <h3>Kalend치r Ve쬶칳ch cien 2025</h3>
            <table>
                <thead>
                    <tr>
                        <th>D치tum</th>
                        <th>Ve쬶치 cena</th>
                    </tr>
                </thead>
                <tbody id="calendar-body">
                    <!-- Napln칤 sa JavaScriptom -->
                </tbody>
            </table>
        </div>

        <!-- Aktu치lne poradie jazdcov -->
        <div id="standings-section" class="hidden">
            <h3>Aktu치lne poradie jazdcov</h3>
            <table>
                <thead>
                    <tr>
                        <th>Poz.</th>
                        <th>Jazdec</th>
                        <th>T칤m</th>
                        <th>Body</th>
                    </tr>
                </thead>
                <tbody id="current-standings">
                    <!-- Napln칤 sa JavaScriptom -->
                </tbody>
            </table>
            
            <h3>Kon코trukt칠rsky poh치r</h3>
            <table>
                <thead>
                    <tr>
                        <th>Poz.</th>
                        <th>T칤m</th>
                        <th>Body</th>
                    </tr>
                </thead>
                <tbody id="constructor-standings">
                    <!-- Napln칤 sa JavaScriptom -->
                </tbody>
            </table>
        </div>
    </div>

    <div class="center-panel">
        <h2>Tabu쬶a Tipova캜ky</h2>
        <table id="tipovacka-table">
            <thead>
                <tr>
                    <th>Por.</th>
                    <th>Meno</th>
                    <th>游끥 1. miesto</th>
                    <th>游볟 2. miesto</th>
                    <th>游볠 3. miesto</th>
                    <th>Body</th>
                </tr>
            </thead>
            <tbody id="tips-body">
                <!-- Napln칤 sa JavaScriptom -->
            </tbody>
        </table>
    </div>

    <div class="right-panel">
        <h2>Tip칠ri F1</h2>
        <div id="participants-list">
            <!-- Napln칤 sa JavaScriptom -->
        </div>
        
        <div id="user-profile">
            <p>Vyberte 칰캜astn칤ka pre detailn칠 inform치cie...</p>
        </div>
        
        <div id="edit-participant" class="hidden admin-section">
            <h3>Edit치cia 칰캜astn칤ka</h3>
            <input type="text" id="edit-name" placeholder="Meno">
            <h4>Tipy na jazdcov:</h4>
            <select id="edit-driver1">
                <!-- Napln칤 sa JavaScriptom -->
            </select>
            <select id="edit-driver2">
                <!-- Napln칤 sa JavaScriptom -->
            </select>
            <select id="edit-driver3">
                <!-- Napln칤 sa JavaScriptom -->
            </select>
            <h4>Tipy na t칤my:</h4>
            <select id="edit-team1">
                <!-- Napln칤 sa JavaScriptom -->
            </select>
            <select id="edit-team2">
                <!-- Napln칤 sa JavaScriptom -->
            </select>
            <select id="edit-team3">
                <!-- Napln칤 sa JavaScriptom -->
            </select>
            <button onclick="saveParticipant()">Ulo쬴콘</button>
            <button onclick="deleteParticipant()" style="background-color: #ff0000;">Vymaza콘</button>
        </div>
    </div>
</div>

<!-- Mod치lne okn치 pre admina -->
<div id="edit-standings-modal" class="modal-overlay">
    <div class="modal-content">
        <h2>Upravi콘 poradie jazdcov</h2>
        <table>
            <thead>
                <tr>
                    <th>Poz.</th>
                    <th>Jazdec</th>
                    <th>T칤m</th>
                    <th>Body</th>
                </tr>
            </thead>
            <tbody id="edit-standings-body">
                <!-- Napln칤 sa JavaScriptom -->
            </tbody>
        </table>
        <button onclick="saveStandings()">Ulo쬴콘 zmeny</button>
        <button onclick="hideModal('edit-standings-modal')">Zru코i콘</button>
    </div>
</div>

<div id="edit-constructors-modal" class="modal-overlay">
    <div class="modal-content">
        <h2>Upravi콘 kon코trukt칠rsky poh치r</h2>
        <table>
            <thead>
                <tr>
                    <th>Poz.</th>
                    <th>T칤m</th>
                    <th>Body</th>
                </tr>
            </thead>
            <tbody id="edit-constructors-body">
                <!-- Napln칤 sa JavaScriptom -->
            </tbody>
        </table>
        <button onclick="saveConstructors()">Ulo쬴콘 zmeny</button>
        <button onclick="hideModal('edit-constructors-modal')">Zru코i콘</button>
    </div>
</div>

<div id="add-participant-modal" class="modal-overlay">
    <div class="modal-content">
        <h2>Prida콘 nov칠ho 칰캜astn칤ka</h2>
        <input type="text" id="new-participant-name" placeholder="Meno 칰캜astn칤ka">
        <h4>Tipy na jazdcov:</h4>
        <select id="new-driver1">
            <!-- Napln칤 sa JavaScriptom -->
        </select>
        <select id="new-driver2">
            <!-- Napln칤 sa JavaScriptom -->
        </select>
        <select id="new-driver3">
            <!-- Napln칤 sa JavaScriptom -->
        </select>
        <h4>Tipy na t칤my:</h4>
        <select id="new-team1">
            <!-- Napln칤 sa JavaScriptom -->
        </select>
        <select id="new-team2">
            <!-- Napln칤 sa JavaScriptom -->
        </select>
        <select id="new-team3">
            <!-- Napln칤 sa JavaScriptom -->
        </select>
        <button onclick="confirmAddParticipant()">Prida콘</button>
        <button onclick="hideModal('add-participant-modal')">Zru코i콘</button>
    </div>
</div>

<script>
    // D치ta o aktu치lnom porad칤
    let currentStandings = [
        { position: 1, driver: "Lando Norris", team: "McLaren", points: 44 },
        { position: 2, driver: "Max Verstappen", team: "Red Bull Racing", points: 36 },
        { position: 3, driver: "George Russell", team: "Mercedes", points: 35 },
        { position: 4, driver: "Oscar Piastri", team: "McLaren", points: 34 },
        { position: 5, driver: "Kimi Antonelli", team: "Mercedes", points: 22 },
        { position: 6, driver: "Alexander Albon", team: "Williams", points: 16 },
        { position: 7, driver: "Esteban Ocon", team: "Haas", points: 10 },
        { position: 8, driver: "Lance Stroll", team: "Aston Martin", points: 10 },
        { position: 9, driver: "Lewis Hamilton", team: "Ferrari", points: 9 },
        { position: 10, driver: "Charles Leclerc", team: "Ferrari", points: 8 },
        { position: 11, driver: "Nico Hulkenberg", team: "Kick Sauber", points: 6 },
        { position: 12, driver: "Oliver Bearman", team: "Haas", points: 4 },
        { position: 13, driver: "Yuki Tsunoda", team: "Racing Bulls", points: 3 },
        { position: 14, driver: "Carlos Sainz", team: "Williams", points: 1 },
        { position: 15, driver: "Isack Hadjar", team: "Racing Bulls", points: 0 },
        { position: 16, driver: "Pierre Gasly", team: "Alpine", points: 0 },
        { position: 17, driver: "Liam Lawson", team: "Red Bull Racing", points: 0 },
        { position: 18, driver: "Jack Doohan", team: "Alpine", points: 0 },
        { position: 19, driver: "Gabriel Bortoleto", team: "Kick Sauber", points: 0 }
    ];

    // Kon코trukt칠rske poradie
    let constructorStandings = [
        { position: 1, team: "McLaren", points: 78 },
        { position: 2, team: "Mercedes", points: 57 },
        { position: 3, team: "Red Bull Racing", points: 36 },
        { position: 4, team: "Ferrari", points: 17 },
        { position: 5, team: "Williams", points: 17 },
        { position: 6, team: "Haas", points: 14 },
        { position: 7, team: "Aston Martin", points: 10 },
        { position: 8, team: "Kick Sauber", points: 6 },
        { position: 9, team: "Racing Bulls", points: 3 },
        { position: 10, team: "Alpine", points: 0 }
    ];

    // Kalend치r VC
    const grandPrixList = [
        { date: "16.03.2025", name: "Ve쬶치 cena Austr치lie (Melbourne)" },
        { date: "23.03.2025", name: "Ve쬶치 cena 캛칤ny (마nghaj)" },
        { date: "06.04.2025", name: "Ve쬶치 cena Japonska (Suzuka)" },
        { date: "13.04.2025", name: "Ve쬶치 cena Bahrajnu (Sakhir)" },
        { date: "20.04.2025", name: "Ve쬶치 cena Saudskej Ar치bie (Jeddah)" },
        { date: "04.05.2025", name: "Ve쬶치 cena Miami (Florida)" },
        { date: "18.05.2025", name: "Ve쬶치 cena Emilia Romagna (Imola)" },
        { date: "25.05.2025", name: "Ve쬶치 cena Monaka (Monako)" },
        { date: "01.06.2025", name: "Ve쬶치 cena 맗anielska (Barcelona)" },
        { date: "15.06.2025", name: "Ve쬶치 cena Kanady (Montreal)" },
        { date: "29.06.2025", name: "Ve쬶치 cena Rak칰ska (Spielberg)" },
        { date: "06.07.2025", name: "Ve쬶치 cena Ve쬶ej Brit치nie (Silverstone)" },
        { date: "27.07.2025", name: "Ve쬶치 cena Belgicka (Spa-Francorchamps)" },
        { date: "03.08.2025", name: "Ve쬶치 cena Ma캞arska (Hungaroring)" },
        { date: "31.08.2025", name: "Ve쬶치 cena Holandska (Zandvoort)" },
        { date: "07.09.2025", name: "Ve쬶치 cena Talianska (Monza)" },
        { date: "21.09.2025", name: "Ve쬶치 cena Azerbajd쬬nu (Baku)" },
        { date: "05.10.2025", name: "Ve쬶치 cena Singapuru (Marina Bay)" },
        { date: "19.10.2025", name: "Ve쬶치 cena USA (Texas)" },
        { date: "26.10.2025", name: "Ve쬶치 cena Mexika (Mexiko City)" },
        { date: "09.11.2025", name: "Ve쬶치 cena Sao Paula (Interlagos)" },
        { date: "22.11.2025", name: "Ve쬶치 cena Las Vegas (Las Vegas)" },
        { date: "30.11.2025", name: "Ve쬶치 cena Kataru (Lusail)" },
        { date: "07.12.2025", name: "Ve쬶치 cena Abu Dhabi (Yas Marina)" }
    ];

    // Tipy 칰캜astn칤kov
    let participantTips = [
        {
            name: "Vlasto",
            drivers: ["Lando Norris", "Charles Leclerc", "Max Verstappen"],
            teams: ["McLaren", "Ferrari", "Red Bull Racing"]
        },
        {
            name: "Amon",
            drivers: ["Lando Norris", "Max Verstappen", "Oscar Piastri"],
            teams: ["McLaren", "Ferrari", "Red Bull Racing"]
        },
        {
            name: "Ondra",
            drivers: ["Lando Norris", "Charles Leclerc", "Lewis Hamilton"],
            teams: ["McLaren", "Ferrari", "Mercedes"]
        },
        {
            name: "Dominika",
            drivers: ["Lando Norris", "Max Verstappen", "Charles Leclerc"],
            teams: ["McLaren", "Ferrari", "Red Bull Racing"]
        },
        {
            name: "Du코an",
            drivers: ["Max Verstappen", "Lando Norris", "Oscar Piastri"],
            teams: ["McLaren", "Ferrari", "Red Bull Racing"]
        },
        {
            name: "Lucka",
            drivers: ["Max Verstappen", "Lando Norris", "Lewis Hamilton"],
            teams: ["Red Bull Racing", "Ferrari", "McLaren"]
        }
    ];

    // Aktu치lne prihl치sen칳 pou쮂셨ate
    let currentUser = null;
    let currentParticipant = null;

    // Funkcia na z칤skanie CSS triedy pre t칤m
    function getTeamClass(teamName) {
        if (!teamName) return '';
        
        // Normalizujeme n치zov t칤mu
        const normalizedTeam = teamName.toLowerCase().replace(/\s+/g, '');
        
        if (normalizedTeam.includes("mclaren")) return "team-mclaren";
        if (normalizedTeam.includes("ferrari")) return "team-ferrari";
        if (normalizedTeam.includes("redbull")) return "team-redbull";
        if (normalizedTeam.includes("mercedes")) return "team-mercedes";
        if (normalizedTeam.includes("astonmartin")) return "team-astonmartin";
        if (normalizedTeam.includes("alpine")) return "team-alpine";
        if (normalizedTeam.includes("haas")) return "team-haas";
        if (normalizedTeam.includes("racingbulls")) return "team-racingbulls";
        if (normalizedTeam.includes("williams")) return "team-williams";
        if (normalizedTeam.includes("sauber")) return "team-sauber";
        
        return ''; // Ak sa nena코iel 쬴adny t칤m
    }

    // Funkcia na v칳po캜et bodov pod쬬 nov칠ho syst칠mu
    function calculatePoints() {
        // Z칤skame skuto캜n칳ch majstrov sveta a v칤콘azov poh치ra kon코trukt칠rov
        const actualChampion = currentStandings[0].driver;
        const actualConstructorChampion = constructorStandings[0].team;
        
        // Vytvor칤me mapu aktu치lneho poradia pre r칳chle vyh쬬d치vanie
        const driverStandingsMap = {};
        currentStandings.forEach(driver => {
            driverStandingsMap[driver.driver] = driver.position;
        });

        const teamStandingsMap = {};
        constructorStandings.forEach(team => {
            teamStandingsMap[team.team] = team.position;
        });

        // Pre ka쬯칠ho 칰캜astn칤ka vypo캜칤tame body
        participantTips.forEach(participant => {
            let points = 0;

            // 1. Spr치vny majster sveta (5 bodov)
            if (participant.drivers[0] === actualChampion) {
                points += 5;
            }

            // 2. Spr치vny v칤콘az poh치ra kon코trukt칠rov (5 bodov)
            if (participant.teams[0] === actualConstructorChampion) {
                points += 5;
            }

            // 3. Spr치vne umiestnenie jazdca v top3 (3 body za ka쬯칰 spr치vnu poz칤ciu)
            for (let i = 0; i < 3; i++) {
                const tippedDriver = participant.drivers[i];
                const actualPosition = driverStandingsMap[tippedDriver];
                
                if (actualPosition === i + 1) {
                    points += 3;
                }
                // 5. Jazdec v top3 ale na inom mieste (1 bod)
                else if (actualPosition <= 3) {
                    points += 1;
                }
            }

            // 4. Spr치vne umiestnenie t칤mu v top3 (3 body za ka쬯칰 spr치vnu poz칤ciu)
            for (let i = 0; i < 3; i++) {
                const tippedTeam = participant.teams[i];
                const actualPosition = teamStandingsMap[tippedTeam];
                
                if (actualPosition === i + 1) {
                    points += 3;
                }
                // 6. T칤m v top3 ale na inom mieste (1 bod)
                else if (actualPosition <= 3) {
                    points += 1;
                }
            }

            participant.points = points;
        });

        // Zoradenie 칰캜astn칤kov pod쬬 bodov
        participantTips.sort((a, b) => b.points - a.points);
    }

    // Naplnenie tabu쬶y tipova캜ky
    function fillTipovackaTable() {
        const tableBody = document.querySelector('#tips-body');
        tableBody.innerHTML = '';

        participantTips.forEach((participant, index) => {
            const row = document.createElement('tr');
            if (index === 0) row.classList.add('first-place');
            
            // Z칤skanie CSS tried pre ka쬯칠ho jazdca
            const driver1Class = getTeamClass(getDriverTeam(participant.drivers[0]));
            const driver2Class = getTeamClass(getDriverTeam(participant.drivers[1]));
            const driver3Class = getTeamClass(getDriverTeam(participant.drivers[2]));
            
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${participant.name}</td>
                <td class="${driver1Class}">${participant.drivers[0]}</td>
                <td class="${driver2Class}">${participant.drivers[1]}</td>
                <td class="${driver3Class}">${participant.drivers[2]}</td>
                <td>${participant.points}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Funkcia na z칤skanie t칤mu pre jazdca
    function getDriverTeam(driverName) {
        const driver = currentStandings.find(d => d.driver === driverName);
        return driver ? driver.team : '';
    }

    // Naplnenie kalend치ra
    function fillCalendar() {
        const tableBody = document.querySelector('#calendar-body');
        tableBody.innerHTML = '';

        grandPrixList.forEach(gp => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${gp.date}</td>
                <td>${gp.name}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Naplnenie aktu치lneho poradia
    function fillStandings() {
        const standingsBody = document.getElementById('current-standings');
        const constructorBody = document.getElementById('constructor-standings');
        
        standingsBody.innerHTML = '';
        constructorBody.innerHTML = '';
        
        currentStandings.forEach(driver => {
            const row = document.createElement('tr');
            const teamClass = getTeamClass(driver.team);
            row.className = teamClass;
            row.innerHTML = `
                <td>${driver.position}</td>
                <td>${driver.driver}</td>
                <td>${driver.team}</td>
                <td>${driver.points}</td>
            `;
            standingsBody.appendChild(row);
        });
        
        constructorStandings.forEach(team => {
            const row = document.createElement('tr');
            const teamClass = getTeamClass(team.team);
            row.className = teamClass;
            row.innerHTML = `
                <td>${team.position}</td>
                <td>${team.team}</td>
                <td>${team.points}</td>
            `;
            constructorBody.appendChild(row);
        });
    }

    // Naplnenie zoznamu 칰캜astn칤kov
    function fillParticipantsList() {
        const participantsList = document.getElementById('participants-list');
        participantsList.innerHTML = '';
        
        participantTips.forEach(participant => {
            const p = document.createElement('p');
            const a = document.createElement('a');
            a.href = '#';
            a.className = 'participant-link';
            a.textContent = participant.name;
            a.onclick = () => showParticipant(participant.name);
            p.appendChild(a);
            participantsList.appendChild(p);
        });
    }

    // Naplnenie selectov pre jazdcov a t칤my
    function fillSelectOptions() {
        const driverSelects = ['edit-driver1', 'edit-driver2', 'edit-driver3', 'new-driver1', 'new-driver2', 'new-driver3'];
        const teamSelects = ['edit-team1', 'edit-team2', 'edit-team3', 'new-team1', 'new-team2', 'new-team3'];
        
        // Naplnenie selectov pre jazdcov
        driverSelects.forEach(selectId => {
            const select = document.getElementById(selectId);
            if (select) {
                select.innerHTML = '';
                currentStandings.forEach(driver => {
                    const option = document.createElement('option');
                    option.value = driver.driver;
                    option.textContent = driver.driver;
                    select.appendChild(option);
                });
            }
        });
        
        // Naplnenie selectov pre t칤my
        teamSelects.forEach(selectId => {
            const select = document.getElementById(selectId);
            if (select) {
                select.innerHTML = '';
                constructorStandings.forEach(team => {
                    const option = document.createElement('option');
                    option.value = team.team;
                    option.textContent = team.team;
                    select.appendChild(option);
                });
            }
        });
    }

    // Funkcia na prep칤nanie sekci칤
    function toggleSection(sectionId) {
        const section = document.getElementById(sectionId);
        section.classList.toggle('hidden');
        
        // Ak otv치rame sekciu, napln칤me ju d치tami
        if (!section.classList.contains('hidden')) {
            if (sectionId === 'calendar-section') {
                fillCalendar();
            } else if (sectionId === 'standings-section') {
                fillStandings();
            }
        }
    }

    // Prihlasovacia funkcia
    function login() {
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        
        if(username === "admin" && password === "admin123") {
            currentUser = { username: "admin", isAdmin: true };
            document.getElementById('admin-controls').classList.remove('hidden');
            alert("Admin prihl치sen칳!");
        } else if(username && password) {
            currentUser = { username, isAdmin: false };
            document.getElementById('admin-controls').classList.add('hidden');
            alert("Vitaj " + username + "!");
        } else {
            alert("Chyba prihl치senia!");
        }
    }

    // Zobrazenie 칰캜astn칤ka
    function showParticipant(name) {
        currentParticipant = participantTips.find(p => p.name === name);
        if (!currentParticipant) return;
        
        const profileDiv = document.getElementById('user-profile');
        
        // Z칤skanie CSS tried pre ka쬯칠ho jazdca
        const driver1Class = getTeamClass(getDriverTeam(currentParticipant.drivers[0]));
        const driver2Class = getTeamClass(getDriverTeam(currentParticipant.drivers[1]));
        const driver3Class = getTeamClass(getDriverTeam(currentParticipant.drivers[2]));
        
        // Z칤skanie CSS tried pre ka쬯칳 t칤m
        const team1Class = getTeamClass(currentParticipant.teams[0]);
        const team2Class = getTeamClass(currentParticipant.teams[1]);
        const team3Class = getTeamClass(currentParticipant.teams[2]);
        
        profileDiv.innerHTML = `
            <h3>${currentParticipant.name}</h3>
            <p><strong>Tipy:</strong></p>
            <p>1. miesto: <span class="${driver1Class}">${currentParticipant.drivers[0]}</span></p>
            <p>2. miesto: <span class="${driver2Class}">${currentParticipant.drivers[1]}</span></p>
            <p>3. miesto: <span class="${driver3Class}">${currentParticipant.drivers[2]}</span></p>
            <p><strong>T칤my:</strong></p>
            <p>1. miesto: <span class="${team1Class}">${currentParticipant.teams[0]}</span></p>
            <p>2. miesto: <span class="${team2Class}">${currentParticipant.teams[1]}</span></p>
            <p>3. miesto: <span class="${team3Class}">${currentParticipant.teams[2]}</span></p>
            <p><strong>Celkov칠 body:</strong> ${currentParticipant.points}</p>
        `;
        
        if (currentUser && currentUser.isAdmin) {
            document.getElementById('edit-participant').classList.remove('hidden');
            document.getElementById('edit-name').value = currentParticipant.name;
            
            // Nastavenie hodn칪t v selectoch
            document.getElementById('edit-driver1').value = currentParticipant.drivers[0];
            document.getElementById('edit-driver2').value = currentParticipant.drivers[1];
            document.getElementById('edit-driver3').value = currentParticipant.drivers[2];
            
            document.getElementById('edit-team1').value = currentParticipant.teams[0];
            document.getElementById('edit-team2').value = currentParticipant.teams[1];
            document.getElementById('edit-team3').value = currentParticipant.teams[2];
        } else {
            document.getElementById('edit-participant').classList.add('hidden');
        }
    }

    // Ulo쬰nie 칰캜astn칤ka
    function saveParticipant() {
        if (!currentUser || !currentUser.isAdmin || !currentParticipant) return;
        
        const newName = document.getElementById('edit-name').value;
        if (!newName) {
            alert("Meno 칰캜astn칤ka nem칪쬰 by콘 pr치zdne!");
            return;
        }
        
        // Z칤skanie nov칳ch hodn칪t
        const drivers = [
            document.getElementById('edit-driver1').value,
            document.getElementById('edit-driver2').value,
            document.getElementById('edit-driver3').value
        ];
        
        const teams = [
            document.getElementById('edit-team1').value,
            document.getElementById('edit-team2').value,
            document.getElementById('edit-team3').value
        ];
        
        // Kontrola dupl칤k치tov
        if (new Set(drivers).size !== 3) {
            alert("Jazdci sa nesm칰 opakova콘!");
            return;
        }
        
        if (new Set(teams).size !== 3) {
            alert("T칤my sa nesm칰 opakova콘!");
            return;
        }
        
        // Aktualiz치cia d치t
        currentParticipant.name = newName;
        currentParticipant.drivers = drivers;
        currentParticipant.teams = teams;
        
        // Prepo캜칤tanie bodov
        calculatePoints();
        
        // Obnovenie zobrazenia
        fillTipovackaTable();
        fillParticipantsList();
        showParticipant(newName);
        
        alert("칔캜astn칤k bol 칰spe코ne aktualizovan칳!");
    }

    // Vymazanie 칰캜astn칤ka
    function deleteParticipant() {
        if (!currentUser || !currentUser.isAdmin || !currentParticipant) return;
        
        if (confirm(`Naozaj chcete vymaza콘 칰캜astn칤ka ${currentParticipant.name}?`)) {
            const index = participantTips.findIndex(p => p.name === currentParticipant.name);
            if (index !== -1) {
                participantTips.splice(index, 1);
                
                // Obnovenie zobrazenia
                calculatePoints();
                fillTipovackaTable();
                fillParticipantsList();
                
                document.getElementById('edit-participant').classList.add('hidden');
                document.getElementById('user-profile').innerHTML = '<p>Vyberte 칰캜astn칤ka pre detailn칠 inform치cie...</p>';
                
                alert("칔캜astn칤k bol 칰spe코ne vymazan칳!");
            }
        }
    }

    // Pridanie nov칠ho 칰캜astn칤ka
    function addNewParticipant() {
        if (!currentUser || !currentUser.isAdmin) return;
        
        // Naplnenie selectov
        fillSelectOptions();
        
        // Vynulovanie hodn칪t
        document.getElementById('new-participant-name').value = '';
        document.getElementById('new-driver1').selectedIndex = 0;
        document.getElementById('new-driver2').selectedIndex = 0;
        document.getElementById('new-driver3').selectedIndex = 0;
        document.getElementById('new-team1').selectedIndex = 0;
        document.getElementById('new-team2').selectedIndex = 0;
        document.getElementById('new-team3').selectedIndex = 0;
        
        // Zobrazenie mod치lneho okna
        document.getElementById('add-participant-modal').style.display = 'flex';
    }

    // Potvrdenie pridania nov칠ho 칰캜astn칤ka
    function confirmAddParticipant() {
        const name = document.getElementById('new-participant-name').value.trim();
        if (!name) {
            alert("Meno 칰캜astn칤ka nem칪쬰 by콘 pr치zdne!");
            return;
        }
        
        // Kontrola, 캜i meno u existuje
        if (participantTips.some(p => p.name === name)) {
            alert("칔캜astn칤k s t칳mto menom u existuje!");
            return;
        }
        
        // Z칤skanie hodn칪t
        const drivers = [
            document.getElementById('new-driver1').value,
            document.getElementById('new-driver2').value,
            document.getElementById('new-driver3').value
        ];
        
        const teams = [
            document.getElementById('new-team1').value,
            document.getElementById('new-team2').value,
            document.getElementById('new-team3').value
        ];
        
        // Kontrola dupl칤k치tov
        if (new Set(drivers).size !== 3) {
            alert("Jazdci sa nesm칰 opakova콘!");
            return;
        }
        
        if (new Set(teams).size !== 3) {
            alert("T칤my sa nesm칰 opakova콘!");
            return;
        }
        
        // Pridanie nov칠ho 칰캜astn칤ka
        participantTips.push({
            name: name,
            drivers: drivers,
            teams: teams,
            points: 0
        });
        
        // Prepo캜칤tanie bodov
        calculatePoints();
        
        // Obnovenie zobrazenia
        fillTipovackaTable();
        fillParticipantsList();
        
        // Skrytie mod치lneho okna
        hideModal('add-participant-modal');
        
        alert("Nov칳 칰캜astn칤k bol 칰spe코ne pridan칳!");
    }

    // Zobrazenie edit치cie poradia
    function showEditStandings() {
        if (!currentUser || !currentUser.isAdmin) return;
        
        const modalBody = document.getElementById('edit-standings-body');
        modalBody.innerHTML = '';
        
        currentStandings.forEach(driver => {
            const row = document.createElement('tr');
            row.className = getTeamClass(driver.team);
            row.innerHTML = `
                <td>${driver.position}</td>
                <td>${driver.driver}</td>
                <td>${driver.team}</td>
                <td><input type="number" value="${driver.points}" data-driver="${driver.driver}" style="width: 50px;"></td>
            `;
            modalBody.appendChild(row);
        });
        
        document.getElementById('edit-standings-modal').style.display = 'flex';
    }

    // Zobrazenie edit치cie kon코trukt칠rov
    function showEditConstructors() {
        if (!currentUser || !currentUser.isAdmin) return;
        
        const modalBody = document.getElementById('edit-constructors-body');
        modalBody.innerHTML = '';
        
        constructorStandings.forEach(team => {
            const row = document.createElement('tr');
            row.className = getTeamClass(team.team);
            row.innerHTML = `
                <td>${team.position}</td>
                <td>${team.team}</td>
                <td><input type="number" value="${team.points}" data-team="${team.team}" style="width: 50px;"></td>
            `;
            modalBody.appendChild(row);
        });
        
        document.getElementById('edit-constructors-modal').style.display = 'flex';
    }

    // Ulo쬰nie poradia
    function saveStandings() {
        if (!currentUser || !currentUser.isAdmin) return;
        
        const inputs = document.querySelectorAll('#edit-standings-body input');
        inputs.forEach(input => {
            const driverName = input.getAttribute('data-driver');
            const points = parseInt(input.value);
            
            const driver = currentStandings.find(d => d.driver === driverName);
            if (driver) driver.points = points;
        });
        
        // Zoradi콘 pod쬬 bodov
        currentStandings.sort((a, b) => b.points - a.points);
        currentStandings.forEach((driver, index) => {
            driver.position = index + 1;
        });
        
        hideModal('edit-standings-modal');
        calculatePoints();
        fillStandings();
        fillTipovackaTable();
        alert("Poradie bolo aktualizovan칠!");
    }

    // Ulo쬰nie kon코trukt칠rov
    function saveConstructors() {
        if (!currentUser || !currentUser.isAdmin) return;
        
        const inputs = document.querySelectorAll('#edit-constructors-body input');
        inputs.forEach(input => {
            const teamName = input.getAttribute('data-team');
            const points = parseInt(input.value);
            
            const team = constructorStandings.find(t => t.team === teamName);
            if (team) team.points = points;
        });
        
        // Zoradi콘 pod쬬 bodov
        constructorStandings.sort((a, b) => b.points - a.points);
        constructorStandings.forEach((team, index) => {
            team.position = index + 1;
        });
        
        hideModal('edit-constructors-modal');
        calculatePoints();
        fillStandings();
        fillTipovackaTable();
        alert("Kon코trukt칠rske poradie bolo aktualizovan칠!");
    }

    // Skrytie mod치lneho okna
    function hideModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    // Inicializ치cia
    document.addEventListener('DOMContentLoaded', () => {
        calculatePoints();
        fillCalendar();
        fillStandings();
        fillTipovackaTable();
        fillParticipantsList();
        fillSelectOptions();
    });
</script>

</body>
</html>